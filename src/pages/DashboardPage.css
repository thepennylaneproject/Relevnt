/**
 * ═══════════════════════════════════════════════════════════════════════════
 * DASHBOARD — THE OPEN LEDGER BOOK
 * ═══════════════════════════════════════════════════════════════════════════
 * 
 * Layout: Two-page spread with center gutter
 * - Writing Page (left): 7fr — visually heavier
 * - Gutter (center): 1fr — whitespace pause
 * - Tally Page (right): 4fr — lighter reference column
 * 
 * Tokens used: --ink, --ink-muted, --rule, --champagne, --bg-paper
 * No new tokens introduced.
 * 
 * ═══════════════════════════════════════════════════════════════════════════
 */

/* ═══════════════════════════════════════════════════════════════════════════
   ROOT LAYOUT: THE LEDGER SPREAD
   ═══════════════════════════════════════════════════════════════════════════ */

.ledger-spread {
  display: grid;
  grid-template-columns: 7fr 1fr 4fr;
  gap: 0;
  min-height: 100vh;
  padding: var(--space-16) var(--space-12);
  max-width: 1400px;
  margin: 0 auto;
}

/* Hide duplicate AppLayout header/footer when on dashboard — MastheadNav is the primary nav */
.ledger-spread ~ .header-container,
:has(.ledger-spread) .header-container,
:has(.ledger-spread) .footer {
  display: none;
}

/* ═══════════════════════════════════════════════════════════════════════════
   WRITING PAGE (Primary Zone — Left)
   ═══════════════════════════════════════════════════════════════════════════ */

.writing-page {
  display: flex;
  flex-direction: column;
  padding-right: var(--space-12);
}

/* Header Unit */
.header-unit {
  margin-bottom: var(--space-16);
}

.grounding-phrase {
  font-family: var(--font-display);
  font-size: 3rem;
  font-weight: 700;
  color: var(--ink);
  line-height: 1.15;
  margin: 0 0 var(--space-3) 0;
  letter-spacing: -0.02em;
}

.greeting {
  font-family: var(--font-display);
  font-style: italic;
  font-size: 1.125rem;
  color: var(--ink-muted);
  margin: 0;
}

/* Focus Block */
.focus-block {
  margin-bottom: var(--space-16);
}

.focus-directive {
  font-family: var(--font-display);
  font-size: 1.75rem;
  font-weight: 600;
  color: var(--ink);
  margin: 0 0 var(--space-3) 0;
}

.focus-description {
  font-size: 1.0625rem;
  color: var(--ink-muted);
  line-height: 1.6;
  margin: 0 0 var(--space-6) 0;
  max-width: 480px;
}

/* Primary CTA: The ONE button on this page */
.primary-cta {
  /* Inherits .sketch-button from theme-ledger.css */
}

/* Open Loops: Listed, not boxed — BELOW FOLD on desktop */
.open-loops {
  margin-top: auto; /* Push to bottom of writing page */
  padding-top: var(--space-24); /* Extra spacing ensures below fold on typical desktop viewport */
  border-top: 1px solid var(--rule);
}

.section-label {
  font-family: var(--font-body);
  font-size: 0.6875rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--ink-muted);
  margin: 0 0 var(--space-4) 0;
}

.loops-list {
  list-style: none;
  padding: 0;
  margin: 0;
  counter-reset: loop-counter;
}

.loop-item {
  display: flex;
  flex-direction: column;
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--rule);
  counter-increment: loop-counter;
}

.loop-item::before {
  content: counter(loop-counter) ".";
  font-family: var(--font-display);
  font-size: 1rem;
  color: var(--ink-muted);
  margin-bottom: var(--space-1);
}

.loop-title {
  font-family: var(--font-display);
  font-size: 1.125rem;
  font-weight: 500;
  color: var(--ink);
}

.loop-desc {
  font-size: 0.875rem;
  color: var(--ink-muted);
  margin-top: var(--space-1);
}

/* Footer Marginalia: Uses global .footer-marginalia from theme-ledger.css */

/* ═══════════════════════════════════════════════════════════════════════════
   GUTTER (Margin Zone — Center)
   ═══════════════════════════════════════════════════════════════════════════ */

.gutter {
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  padding-bottom: var(--space-16);
  position: relative;
}

/* Vertical spine line */
.gutter::before {
  content: '';
  position: absolute;
  top: 2rem;
  bottom: 2rem;
  left: 50%;
  width: 1px;
  background: var(--rule);
  opacity: 0.4;
}

.marginalia-whisper {
  font-family: var(--font-display);
  font-style: italic;
  font-size: 0.8125rem;
  color: var(--ink-muted);
  opacity: 0.6;
  text-align: center;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  margin: 0;
  max-height: 160px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   TALLY PAGE (Secondary Zone — Right)
   ═══════════════════════════════════════════════════════════════════════════ */

.tally-page {
  display: flex;
  flex-direction: column;
  padding-left: var(--space-8);
  padding-top: var(--space-4);
  /* Sticky on desktop to prevent left-heavy scroll drift */
  position: sticky;
  top: 4rem;
  align-self: flex-start;
  height: fit-content;
}

/* Momentum Indicator */
.momentum-indicator {
  margin-bottom: var(--space-10);
}

.momentum-indicator .section-label {
  margin-bottom: var(--space-2);
}

.momentum-status {
  font-family: var(--font-display);
  font-size: 1rem;
  color: var(--ink);
  margin: 0;
}

/* Ledger Table: 3 rows, no boxes */
.ledger-table {
  width: 100%;
  border-collapse: collapse;
}

.ledger-row {
  border-bottom: 1px solid var(--rule);
}

.ledger-row:last-child {
  border-bottom: none;
}

.ledger-label {
  font-size: 0.9375rem;
  color: var(--ink-muted);
  padding: var(--space-3) 0;
  text-align: left;
}

.ledger-value {
  font-family: var(--font-display);
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--ink);
  padding: 0.875rem 0;
  text-align: right;
}

/* ═══════════════════════════════════════════════════════════════════════════
   RESPONSIVE: MOBILE STACKING
   ═══════════════════════════════════════════════════════════════════════════
   
   On mobile:
   1. Header + Focus first
   2. Tally second
   3. Open Loops last
   4. Gutter removed entirely
   
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 1024px) {
  .ledger-spread {
    display: flex;
    flex-direction: column;
    padding: var(--space-8) var(--space-6);
    gap: var(--space-12);
  }
  
  /* Gutter is hidden on mobile — no simulation */
  .gutter {
    display: none;
  }
  
  .writing-page {
    padding-right: 0;
    order: 1;
  }
  
  /* Keep Header + Focus together, move Open Loops later */
  .open-loops {
    order: 3;
    margin-top: 0;
    padding-top: var(--space-8);
  }
  
  .tally-page {
    padding-left: 0;
    padding-top: var(--space-8);
    border-top: 1px solid var(--rule);
    order: 2;
    /* Reset sticky on mobile */
    position: static;
    align-self: auto;
  }
  
  /* Smaller typography on mobile */
  .grounding-phrase {
    font-size: 2rem;
  }
  
  .focus-directive {
    font-size: 1.375rem;
  }
  
  .header-unit {
    margin-bottom: var(--space-10);
  }
  
  .focus-block {
    margin-bottom: 0;
  }
}

@media (max-width: 640px) {
  .ledger-spread {
    padding: var(--space-6) var(--space-4);
    gap: var(--space-8);
  }
  
  .grounding-phrase {
    font-size: 1.625rem;
  }
  
  .focus-directive {
    font-size: 1.25rem;
  }
  
  .ledger-value {
    font-size: 1.25rem;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   END OF DASHBOARD STYLES
   ═══════════════════════════════════════════════════════════════════════════ */
